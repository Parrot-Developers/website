# Go deeper

If you want to build your own SDK, you can ! It is fully open sourced.

SDK [sources are hosted on github](https://github.com/Parrot-Developers/). To download them, you only have to clone ARSDKBuildUtils: `git clone https://github.com/Parrot-Developers/ARSDKBuildUtils.git`. Then follow the [How to build the SDK section](#how-to-build-the-sdk).


## Organisation

SDK is organized as following:

### ARSDKBuildUtils
This repo is in charge of cloning, updating and building the whole SDK. It is the one you need to download if you want to compile the SDK.

### libARCommands
This library contains all the sources related to the commands you can sent to and receive from the drone.

### libARController
This library provides an abstraction level to connect to the drone. With this library you can create a device controller, which ables you to pilot, take pictures, receive stream (depending on the drone), and send/receive other commands from the drone.

### libARDataTransfer
This library helps you transfering data from or to the drone.

### libARDiscovery
This library helps you to discover from the network all supported drones. 

### libARMavlink
This library helps you to generate an automated flight file. 

### libARMedia
This library provides an abstraction layer around the medias generated by the drones.

### libARNetwork
This library is in charge of sending and receiving packets to/from the drone. 

### libARNetworkAL
This library provides an abstraction layer around the different networks (BLE or Wifi networks).

### libARSAL
This library provides a system abstraction layer.

### libARStream
This library deals with all streaming types. It packs/unpacks streams.

### libARUpdater
This library helps you to update your drone. It provides functions to tests if the version is the last one and functions to update the drone.

### libARUtils
This library provides utilities classes.

### Samples
You can find in this repo lots of basic examples.

##How to build the SDK
**The root folder where all the source code will be downloaded will be noted \<SDK\>**

**Important :**<br/>
Before building the SDK, **please run \<SDK\>/ARSDKBuildUtils/CheckEnv.py** script until it says that your target can be build.

###Required external tools

These external tools are required to build the SDK :

* **git**
* **wget**
* **automake**
* **autoconf**
* **libtool**
* **yasm**
* **nasm**

**Linux** : install these tools using your favorite package manager <br/>
**OSX** : you will need XCode to be installed. Then, you can use [brew](http://brew.sh/) to install these tools.<br/>

###General Build

The build is done by the ./SDKBuild.sh script. You can run `./SDKBuild.sh --help` to know more about the building options.

###Unix Build
**Linux** : Tested on Ubuntu 12.10, 13.04, 13.10 and 14.04<br/>
**OSX** : Tested on 10.9.2 and 10.10.3<br/>

The command to build the SDK for Unix platform is :<br/>
`./SDK3Build.py -t Unix`<br/>
The output will be in \<SDK\>/ARBuildUtils/Targets/Unix/Install/<br/>

###iOS Build
**OSX** : Tested on 10.9.2 and 10.10.3<br/>

The command to build the SDK for iOS is :<br/>
`./SDK3Build.py -t iOS`<br/>
The output will be in \<SDK\>/ARBuildUtils/Targets/iOS/Install/<br/>
The frameworks will be in \<SDK\>/ARBuildUtils/Targets/iOS/Install/Frameworks<br/>

###Android Build
**Linux** : Tested on Ubuntu 12.10, 13.04, 13.10 and 14.04<br/>
**OSX** : Tested on 10.9.2 and 10.10.3<br/>

For **OSX**, you will need to [install rpl in version 1.5.5 from sourceforge](http://sourceforge.net/projects/rpl/files/rpl/rpl-1.5.5/), and add it to your PATH.

You will need this following parts : 

- a working jdk with java 6 (1.6) support
- Android SDK and NDK (The SDK is built
 against Android-19 and requires Android-14 runtime)
- declare environment variables named `ANDROID_SDK_PATH` and
 `ANDROID_NDK_PATH`, each pointing to the root of the corresponding dev kit
- You must have the android native toolchains for android-14 in your path.
 To generate a standalone toolchain, use the following command :
`$ANDROID_NDK_PATH/build/tools/make-standalone-toolchain.sh --platform=android-14 --arch=<arch> --install-dir=<your/installation/dir>`.
 For the three archs `arm`, `mips` and `x86`
--> Note that you must use three different installation directories (one for
 each architecture), and you need to add each `install_dir/bin` directory to your
 path. A typical installation is to have an `~/android_toolchains/` folder, in
 which you will put the three `toolchain_<arch>` folders. This facilitates the
 updates as you can just remove the root folder and generate new toolchains when
 upgrading the android NDK.
 

The command to build the SDK for Android platform is :<br/>
`./SDK3Build.py -t Android`<br/>
The output will be in \<SDK\>/ARBuildUtils/Targets/Android/Install/<br/>
The jar files will be in \<SDK\>/ARSDKBuildUtils/Targets/Android/Install/jars/release