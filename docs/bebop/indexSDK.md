---
title: ARDroneSDK3 API Reference

language_tabs:
  - C
  - Objective C
  - Java

toc_footers:
  - <a href='https://github.com/Parrot-Developers/ARSDKBuildUtils'>See SDK sources</a>
  - <a href='http://github.com/tripit/slate'>Documentation Powered by Slate</a>

includes:
  - errors

search: true
---

General information
=====

The SDK will help you connect, pilot, receive stream, save and download medias (photo and video), send and play autopilot flight plans and update your drone. You can use it on the Rolling Spider, Jumping Sumo and Bebop Drone.

FreeFlight3 is using this SDK.

This SDK is mainly written is C, it provides libraries for Unix system, Android jars and iOS frameworks. 

It is organized as following:

ARSDKBuildUtils
----
This repo is in charge of cloning, updating and building the whole SDK. It is the one you need to download if you want to compile the SDK.

libARCommands
----
This library contains all the sources related to the commands you can sent to and receive from the drone.

libARController
----
This library provides an abstraction level to connect to the drone. With this library you can create a device controller, which ables you to pilot, take pictures, receive stream (depending on the drone), and send/receive other commands from the drone.

libARDataTransfer
----
This library helps you transfering data from or to the drone.

libARDiscovery
----
This library helps you to discover from the network all supported drones. 

libARMavlink
----
This library helps you to generate an automated flight file. 

libARMedia
----
This library provides an abstraction layer around the medias generated by the drones.

libARNetwork
----
This library is in charge of sending and receiving packets to/from the drone. 

libARNetworkAL
----
This library provides an abstraction layer around the different networks (BLE or Wifi networks).

libARSAL
----
This library provides a system abstraction layer.

libARStream
----
This library deals with all streaming types. It packs/unpacks streams.

libARUpdater
----
This library helps you to update your drone. It provides functions to tests if the version is the last one and functions to update the drone.

libARUtils
----
This library provides utilities classes.

Samples
----
You can find in this repo lots of basic examples.


Installation
=========
**The root folder where all the source code will be downloaded will be noted \<SDK\>**

**Important :**<br/>
Before building the SDK, **please run \<SDK\>/ARSDKBuildUtils/CheckEnv.py** script until it says that your target can be build.

###Required external tools

These external tools are required to build the SDK :

* **git**
* **wget**
* **automake**
* **autoconf**
* **libtool**
* **yasm**
* **nasm**

**Linux** : install these tools using your favorite package manager <br/>
**OSX** : you will need XCode to be installed. Then, you can use [brew](http://brew.sh/) to install these tools.<br/>

### Build
The build is done by the ./SDKBuild.sh script. You can run `./SDKBuild.sh --help` to know more about the building options.

Unix Build
-----
**Linux** : Tested on Ubuntu 12.10, 13.04, 13.10 and 14.04<br/>
**OSX** : Tested on 10.9.2 and 10.10.3<br/>

The command to build the SDK for Unix platform is :<br/>
`./SDK3Build.py -t Unix`<br/>
The output will be in \<SDK\>/ARBuildUtils/Targets/Unix/Install/<br/>

iOS Build
-----
**OSX** : Tested on 10.9.2 and 10.10.3<br/>

The command to build the SDK for iOS is :<br/>
`./SDK3Build.py -t iOS`<br/>
The output will be in \<SDK\>/ARBuildUtils/Targets/iOS/Install/<br/>
The frameworks will be in \<SDK\>/ARBuildUtils/Targets/iOS/Install/Frameworks<br/>

Android Build
-----
**Linux** : Tested on Ubuntu 12.10, 13.04, 13.10 and 14.04<br/>
**OSX** : Tested on 10.9.2 and 10.10.3<br/>

For **OSX**, you will need to [install rpl in version 1.5.5 from sourceforge](http://sourceforge.net/projects/rpl/files/rpl/rpl-1.5.5/), and add it to your PATH.

You will need this following parts : 

- a working jdk with java 6 (1.6) support
- Android SDK and NDK (The SDK is built
 against Android-19 and requires Android-14 runtime)
- declare environment variables named `ANDROID_SDK_PATH` and
 `ANDROID_NDK_PATH`, each pointing to the root of the corresponding dev kit
- You must have the android native toolchains for android-14 in your path.
 To generate a standalone toolchain, use the following command :
`$ANDROID_NDK_PATH/build/tools/make-standalone-toolchain.sh --platform=android-14 --arch=<arch> --install-dir=<your/installation/dir>`.
 For the three archs `arm`, `mips` and `x86`
--> Note that you must use three different installation directories (one for
 each architecture), and you need to add each `install_dir/bin` directory to your
 path. A typical installation is to have an `~/android_toolchains/` folder, in
 which you will put the three `toolchain_<arch>` folders. This facilitates the
 updates as you can just remove the root folder and generate new toolchains when
 upgrading the android NDK.
 

The command to build the SDK for Android platform is :<br/>
`./SDK3Build.py -t Android`<br/>
The output will be in \<SDK\>/ARBuildUtils/Targets/Android/Install/<br/>
The jar files will be in \<SDK\>/ARSDKBuildUtils/Targets/Android/Install/jars/release


General usage of the sdk
=========
To use the sdk, you will need to link the builded libraries. 


Commands
===========

How to send commands
--------------------
Commands are sent to drones in two steps.<br/>
- **Command generation** : first, you will need to fill a buffer with the command. <br/>
Example of how to generate a take off command for the Bebop in C : 

```C
u_int8_t cmdBuffer[128];
int32_t cmdSize = 0;
eARCOMMANDS_GENERATOR_ERROR cmdError = ARCOMMANDS_Generator_GenerateARDrone3PilotingTakeOff(cmdBuffer, sizeof(cmdBuffer), &cmdSize);
```
- **Command sending** : then, you will send the command on a specific buffer<br/>
Example of how to send a generated command as an ackknowledge message (11) in C : <br/>

```C
eARNETWORK_ERROR netError = ARNETWORK_Manager_SendData(networkManager, 11, cmdBuffer, cmdSize, NULL, &(arnetworkCmdCallback), 1);
```

Bebop Drone
------------

Here is a presentation of the bebop's main behaviour.

As soon as you are connected to the Bebop, you should add all the callbacks you want to listen. For example, if you want to listen to the battery changes, simply call `ARCOMMANDS_Decoder_SetCommonCommonStateBatteryStateChangedCallback(batteryStateChangedCallback, customData);`. In this call, `batteryStateChangedCallback` is one of your function. Its signature is declared in `<SDK>/libARCommands/Includes/ARCOMMANDS_Decoder.h` (this file is only available after you build the SDK).
Then, you should send the date and time (theses commands are generated with the functions which are declared in `<SDK>/libARCommands/Includes/ARCOMMANDS_Decoder.h` : 
`eARCOMMANDS_GENERATOR_ERROR ARCOMMANDS_Generator_GenerateCommonCommonCurrentDate (uint8_t *buffer, int32_t buffLen, int32_t *cmdLen, const char * _date);` and `eARCOMMANDS_GENERATOR_ERROR ARCOMMANDS_Generator_GenerateCommonCommonCurrentTime (uint8_t *buffer, int32_t buffLen, int32_t *cmdLen, const char * _time);` resp.).<br/>
Then, you should ask for the all settings by sending the command `eARCOMMANDS_GENERATOR_ERROR ARCOMMANDS_Generator_GenerateCommonSettingsAllSettings (uint8_t *buffer, int32_t buffLen, int32_t *cmdLen);`. This


 




